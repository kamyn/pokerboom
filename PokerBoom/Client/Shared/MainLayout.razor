@inherits LayoutComponentBase
@inject AuthenticationStateProvider authProvider
@inject ILocalStorageService localStorage

<MudThemeProvider/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<AuthorizeView>
    <Authorized>
        <MudAppBar Color="Color.Primary" Fixed="false">
            <MudText Typo="Typo.h6">POKERBOOM</MudText>
            <MudSpacer />
            <MudText Typo="Typo.button">Баланс: 1300.52</MudText>
            <MudButton Class="ml-3" Variant="Variant.Outlined" OnClick="Logout">Выйти</MudButton> 
        </MudAppBar>
    </Authorized>
</AuthorizeView>

@Body

@code {
    protected async Task Logout()
    {
        await localStorage.RemoveItemAsync("authToken");
        ((AppAuthenticationStateProvider)authProvider).MarkUserAsLoggedOut();
    }
}